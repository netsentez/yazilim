<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook GÃ¶nderileri Ä°Ã§in Metin BiÃ§imlendirici</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 18px;
            min-height: 150px;
            resize: vertical;
            line-height: 1.5;
        }
        label {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }
        .output-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .copy-button {
            padding: 10px 15px;
            background-color: #28a745; /* YeÅŸil */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            align-self: flex-start;
            transition: background-color 0.2s ease;
        }
        .copy-button:hover {
            background-color: #218838;
        }
        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            margin-bottom: 5px;
        }
        .toolbar button {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 15px;
            transition: background-color 0.2s ease;
        }
        .toolbar button:hover {
            background-color: #0056b3;
        }
        .toolbar button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .shortcut-info {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Facebook GÃ¶nderileri Ä°Ã§in Metin BiÃ§imlendirici</h1>
        <p>BazÄ± Ã¶zel TÃ¼rkÃ§e karakterlerde biÃ§imlendirme sorunu gÃ¶rÃ¼lebilir. BazÄ± mobil cihazlarda daha fazla gÃ¶rÃ¼lebilir. PC'lerde kullanabilirsiniz...</p>
        <div>
            <label for="inputText">BiÃ§imlendirmek istediÄŸiniz metni buraya girin:<br></label>
            <textarea id="inputText" placeholder="Metin girin... Kelime veya kelime gruplarÄ±nÄ± seÃ§in, biÃ§imlendirin..."></textarea>
            <div class="toolbar">
                <button id="boldButton"><b>Koyu</b></button>
                <button id="italicButton"><i>EÄŸik</i></button>
                <button id="boldItalicButton"><b><i>Koyu+EÄŸik</i></b></button>
                <button id="undoButton" disabled>Geri Al</button>
                <button id="redoButton" disabled>Yinele</button>
            </div>
            <div class="shortcut-info">
                Klavye KÄ±sayollarÄ±:
                <ul>
                    <li>**Ctrl/Cmd + B**: Koyu</li>
                    <li>**Ctrl/Cmd + I**: EÄŸik</li>
                    <li>**Ctrl/Cmd + K**: Koyu ve EÄŸik</li>
                    <li>**Ctrl/Cmd + Z**: Geri Al</li>
                    <li>**Ctrl/Cmd + Y**: Yinele</li>
                </ul>
            </div>
        </div>

        <div class="output-section">
            <label for="unicodeOutput">BiÃ§imlenmiÅŸ  metni buradan alÄ±n:</label>
            <textarea id="unicodeOutput" readonly></textarea>
            <button class="copy-button" id="copyButton">BiÃ§imlenmiÅŸ Metni Kopyala</button>
            <h4>Netsentez'in sizlere armaÄŸanÄ±dÄ±r.<br>Dr. Nizamettin Kaya<br><a href="https://netsentez.com/">netsentez.com</a></h4>
        </div>
    </div>

    <script>
        const inputTextarea = document.getElementById('inputText');
        const unicodeOutputTextarea = document.getElementById('unicodeOutput');
        const copyButton = document.getElementById('copyButton');
        const boldButton = document.getElementById('boldButton');
        const italicButton = document.getElementById('italicButton');
        const boldItalicButton = document.getElementById('boldItalicButton');
        const undoButton = document.getElementById('undoButton');
        const redoButton = document.getElementById('redoButton');

        // Unicode karakter eÅŸlemeleri
        const unicodeMap = {
            bold: {
                'A': 'ğ€', 'B': 'ğ', 'C': 'ğ‚', 'D': 'ğƒ', 'E': 'ğ„', 'F': 'ğ…', 'G': 'ğ†', 'H': 'ğ‡', 'I': 'ğˆ', 'J': 'ğ‰', 'K': 'ğŠ', 'L': 'ğ‹', 'M': 'ğŒ',
                'N': 'ğ', 'O': 'ğ', 'P': 'ğ', 'Q': 'ğ', 'R': 'ğ‘', 'S': 'ğ’', 'T': 'ğ“', 'U': 'ğ”', 'V': 'ğ•', 'W': 'ğ–', 'X': 'ğ—', 'Y': 'ğ˜', 'Z': 'ğ™',
                'a': 'ğš', 'b': 'ğ›', 'c': 'ğœ', 'd': 'ğ', 'e': 'ğ', 'f': 'ğŸ', 'g': 'ğ ', 'h': 'ğ¡', 'i': 'ğ¢', 'j': 'ğ£', 'k': 'ğ¤', 'l': 'ğ¥', 'm': 'ğ¦',
                'n': 'ğ§', 'o': 'ğ¨', 'p': 'ğ©', 'q': 'ğª', 'r': 'ğ«', 's': 'ğ¬', 't': 'ğ­', 'u': 'ğ®', 'v': 'ğ¯', 'w': 'ğ°', 'x': 'ğ±', 'y': 'ğ²', 'z': 'ğ³',
                '0': 'ğŸ', '1': 'ğŸ', '2': 'ğŸ', '3': 'ğŸ‘', '4': 'ğŸ’', '5': 'ğŸ“', '6': 'ğŸ”', '7': 'ğŸ•', '8': 'ğŸ–', '9': 'ğŸ—',
                'Ã‡': 'ğ‚Ì§', 'Ä': 'ğ†Ì†', 'Ä°': 'ğˆÌ‡', 'Ã–': 'ğÌˆ', 'Å': 'ğ’Ì§', 'Ãœ': 'ğ”Ìˆ',
                'Ã§': 'ğœÌ§', 'ÄŸ': 'ğ Ì†', 'Ä±': 'Ä±', 'i': 'ğ¢', 'Ã¶': 'ğ¨Ìˆ', 'ÅŸ': 'ğ¬Ì§', 'Ã¼': 'ğ®Ìˆ'
            },
            italic: {
                'A': 'ğ˜ˆ', 'B': 'ğ˜‰', 'C': 'ğ˜Š', 'D': 'ğ˜‹', 'E': 'ğ˜Œ', 'F': 'ğ˜', 'G': 'ğ˜', 'H': 'ğ˜', 'I': 'ğ˜', 'J': 'ğ˜‘', 'K': 'ğ˜’', 'L': 'ğ˜“', 'M': 'ğ˜”',
                'N': 'ğ˜•', 'O': 'ğ˜–', 'P': 'ğ˜—', 'Q': 'ğ˜˜', 'R': 'ğ˜™', 'S': 'ğ˜š', 'T': 'ğ˜›', 'U': 'ğ˜œ', 'V': 'ğ˜', 'W': 'ğ˜', 'X': 'ğ˜Ÿ', 'Y': 'ğ˜ ', 'Z': 'ğ˜¡',
                'a': 'ğ˜¢', 'b': 'ğ˜£', 'c': 'ğ˜¤', 'd': 'ğ˜¥', 'e': 'ğ˜¦', 'f': 'ğ˜§', 'g': 'ğ˜¨', 'h': 'ğ˜©', 'i': 'ğ˜ª', 'j': 'ğ˜«', 'k': 'ğ˜¬', 'l': 'ğ˜­', 'm': 'ğ˜®',
                'n': 'ğ˜¯', 'o': 'ğ˜°', 'p': 'ğ˜±', 'q': 'ğ˜²', 'r': 'ğ˜³', 's': 'ğ˜´', 't': 'ğ˜µ', 'u': 'ğ˜¶', 'v': 'ğ˜·', 'w': 'ğ˜¸', 'x': 'ğ˜¹', 'y': 'ğ˜º', 'z': 'ğ˜»',
                'Ã‡': 'ğ˜ŠÌ§', 'Ä': 'ğ˜Ì†', 'Ä°': 'ğ˜Ì‡', 'Ã–': 'ğ˜–Ìˆ', 'Å': 'ğ˜šÌ§', 'Ãœ': 'ğ˜œÌˆ',
                'Ã§': 'ğ˜¤Ì§', 'ÄŸ': 'ğ˜¨Ì†', 'Ä±': 'Ä±', 'i': 'ğ˜ª', 'Ã¶': 'ğ˜°Ìˆ', 'ÅŸ': 'ğ˜´Ì§', 'Ã¼': 'ğ˜¶Ìˆ'
            },
            boldItalic: {
                'A': 'ğ‘¨', 'B': 'ğ‘©', 'C': 'ğ‘ª', 'D': 'ğ‘«', 'E': 'ğ‘¬', 'F': 'ğ‘­', 'G': 'ğ‘®', 'H': 'ğ‘¯', 'I': 'ğ‘°', 'J': 'ğ‘±', 'K': 'ğ‘²', 'L': 'ğ‘³', 'M': 'ğ‘´',
                'N': 'ğ‘µ', 'O': 'ğ‘¶', 'P': 'ğ‘·', 'Q': 'ğ‘¸', 'R': 'ğ‘¹', 'S': 'ğ‘º', 'T': 'ğ‘»', 'U': 'ğ‘¼', 'V': 'ğ‘½', 'W': 'ğ‘¾', 'X': 'ğ‘¿', 'Y': 'ğ’€', 'Z': 'ğ’',
                'a': 'ğ’‚', 'b': 'ğ’ƒ', 'c': 'ğ’„', 'd': 'ğ’…', 'e': 'ğ’†', 'f': 'ğ’‡', 'g': 'ğ’ˆ', 'h': 'ğ’‰', 'i': 'ğ’Š', 'j': 'ğ’‹', 'k': 'ğ’Œ', 'l': 'ğ’', 'm': 'ğ’',
                'n': 'ğ’', 'o': 'ğ’', 'p': 'ğ’‘', 'q': 'ğ’’', 'r': 'ğ’“', 's': 'ğ’”', 't': 'ğ’•', 'u': 'ğ’–', 'v': 'ğ’—', 'w': 'ğ’˜', 'x': 'ğ’™', 'y': 'ğ’š', 'z': 'ğ’›',
                'Ã‡': 'ğ‘ªÌ§', 'Ä': 'ğ‘®Ì†', 'Ä°': 'ğ‘°Ì‡', 'Ã–': 'ğ‘¶Ìˆ', 'Å': 'ğ‘ºÌ§', 'Ãœ': 'ğ‘¼Ìˆ',
                'Ã§': 'ğ’„Ì§', 'ÄŸ': 'ğ’ˆÌ†', 'Ä±': 'Ä±', 'i': 'ğ’Š', 'Ã¶': 'ğ’Ìˆ', 'ÅŸ': 'ğ’”Ì§', 'Ã¼': 'ğ’–Ìˆ'
            }
        };

        // BiÃ§imlendirilmiÅŸ karakterleri normal hallerine dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in tersine eÅŸleme oluÅŸtur
        const reverseUnicodeMap = new Map();
        for (const styleType in unicodeMap) {
            for (const originalChar in unicodeMap[styleType]) {
                const styledChar = unicodeMap[styleType][originalChar];
                // EÄŸer zaten bir eÅŸleme yoksa veya orijinal karakter daha Ã¶ncelikliyse ekle
                if (!reverseUnicodeMap.has(styledChar)) {
                    reverseUnicodeMap.set(styledChar, originalChar);
                }
            }
        }
        // Noktalama iÅŸaretleri ve diÄŸer semboller iÃ§in de tersine eÅŸleme ekleyelim,
        // bÃ¶ylece temizleme fonksiyonu bunlarÄ± da doÄŸru bir ÅŸekilde algÄ±lar ve deÄŸiÅŸtirmez.
        const commonPunctuationAndSymbols = '.,?!:;\'"()-/\\_+=*&^%$#@!~`<>{}[]|';
        for (const char of commonPunctuationAndSymbols) {
            if (!reverseUnicodeMap.has(char)) {
                reverseUnicodeMap.set(char, char);
            }
        }
        for (let i = 0; i <= 9; i++) { // Rakamlar
            const char = String(i);
            if (!reverseUnicodeMap.has(char)) {
                reverseUnicodeMap.set(char, char);
            }
        }
        // BoÅŸluk karakteri
        if (!reverseUnicodeMap.has(' ')) {
            reverseUnicodeMap.set(' ', ' ');
        }


        let history = [];
        let historyIndex = -1;
        let isProgrammaticChange = false;

        inputTextarea.addEventListener('input', (event) => {
            if (!isProgrammaticChange) {
                saveState();
            }
            updateUnicodeOutput();
        });

        inputTextarea.addEventListener('keydown', handleKeyPress);
        copyButton.addEventListener('click', copyToClipboard);

        boldButton.addEventListener('click', () => applyFormatToSelection('bold'));
        italicButton.addEventListener('click', () => applyFormatToSelection('italic'));
        boldItalicButton.addEventListener('click', () => applyFormatToSelection('boldItalic'));

        undoButton.addEventListener('click', undo);
        redoButton.addEventListener('click', redo);

        function saveState() {
            const currentText = inputTextarea.value;
            if (history.length > 0 && history[historyIndex] === currentText) {
                return;
            }

            if (historyIndex < history.length - 1) {
                history = history.slice(0, historyIndex + 1);
            }
            history.push(currentText);
            historyIndex = history.length - 1;
            updateButtons();
        }

        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                isProgrammaticChange = true;
                inputTextarea.value = history[historyIndex];
                isProgrammaticChange = false;
                updateUnicodeOutput();
                updateButtons();
            }
        }

        function redo() {
            if (historyIndex < history.length - 1) {
                historyIndex++;
                isProgrammaticChange = true;
                inputTextarea.value = history[historyIndex];
                isProgrammaticChange = false;
                updateUnicodeOutput();
                updateButtons();
            }
        }

        function updateButtons() {
            undoButton.disabled = historyIndex <= 0;
            redoButton.disabled = historyIndex >= history.length - 1;
        }

        function updateUnicodeOutput() {
            unicodeOutputTextarea.value = inputTextarea.value;
        }

        function cleanTextFromUnicodeStyles(text) {
            let cleaned = '';
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (reverseUnicodeMap.has(char)) {
                    cleaned += reverseUnicodeMap.get(char);
                } else {
                    cleaned += char; 
                }
            }
            return cleaned;
        }

        function applyUnicodeStyle(text, styleType) {
            let cleanedText = cleanTextFromUnicodeStyles(text);

            let result = '';
            for (let i = 0; i < cleanedText.length; i++) {
                const char = cleanedText[i];
                if (unicodeMap[styleType] && unicodeMap[styleType][char]) {
                    result += unicodeMap[styleType][char];
                } else {
                    result += char; 
                }
            }
            return result;
        }

        function applyFormatToSelection(styleType) {
            const start = inputTextarea.selectionStart;
            const end = inputTextarea.selectionEnd;
            let selectedText = inputTextarea.value.substring(start, end);

            if (selectedText) {
                const newText = applyUnicodeStyle(selectedText, styleType);
                const fullText = inputTextarea.value;
                
                isProgrammaticChange = true;
                inputTextarea.value = fullText.substring(0, start) + newText + fullText.substring(end);
                isProgrammaticChange = false;

                inputTextarea.selectionStart = start;
                inputTextarea.selectionEnd = start + newText.length;
                
                saveState();
                updateUnicodeOutput();
            }
        }

        function handleKeyPress(event) {
            const isCtrlCmd = event.ctrlKey || event.metaKey;

            if (isCtrlCmd) {
                let styleType = '';
                switch (event.key.toUpperCase()) {
                    case 'B':
                        styleType = 'bold';
                        break;
                    case 'I':
                        styleType = 'italic';
                        break;
                    case 'K':
                        styleType = 'boldItalic';
                        break;
                    case 'Z':
                        event.preventDefault(); 
                        undo();
                        return; 
                    case 'Y':
                        event.preventDefault(); 
                        redo();
                        return; 
                }

                if (styleType) {
                    event.preventDefault(); 
                    applyFormatToSelection(styleType);
                }
            }
        }

        function copyToClipboard() {
            unicodeOutputTextarea.select(); 
            unicodeOutputTextarea.setSelectionRange(0, 99999); 
            try {
                document.execCommand('copy'); 
                alert('DÃ¼zenlenmiÅŸ metin panoya kopyalandÄ±!');
            } catch (err) {
                console.error('Kopyalama baÅŸarÄ±sÄ±z oldu:', err);
                alert('Kopyalama baÅŸarÄ±sÄ±z oldu. LÃ¼tfen manuel olarak kopyalayÄ±n.');
            }
        }

        saveState();
        updateUnicodeOutput();
    </script>
</body>
</html>
